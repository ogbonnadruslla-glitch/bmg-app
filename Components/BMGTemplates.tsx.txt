import React, { useState } from 'react';
import PreparatoryTemplate from './BMGPreparatoryTemplate';
import ActionToGrowthProjections from './ActionToGrowthProjections';
import { SalesTarget, Currency, ProjectionDetails, DistributionTargets } from '../types';

// --- Reusable Components ---

const TemplateCard: React.FC<{ title: string; description: string; onClick: () => void; disabled?: boolean }> = ({ title, description, onClick, disabled = false }) => (
    <div 
        onClick={!disabled ? onClick : undefined}
        className={`relative bg-white p-6 rounded-xl border border-gray-200 shadow-sm transition-all duration-300 ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer hover:shadow-lg hover:border-green-400'}`}
    >
        <h3 className="text-xl font-semibold text-gray-800">{title}</h3>
        <p className="text-gray-500 mt-2">{description}</p>
    </div>
);


interface BMGTemplatesProps {
    onProjectionsUpdate: (data: { targets: SalesTarget | null, details: ProjectionDetails | null, distributionTargets: DistributionTargets | null }) => void;
    currency: Currency;
}

const BMGTemplates: React.FC<BMGTemplatesProps> = ({ onProjectionsUpdate, currency }) => {
    const [activeTemplate, setActiveTemplate] = useState<string | null>(null);
    
    if (activeTemplate === 'preparatory') {
        return <PreparatoryTemplate onBack={() => setActiveTemplate(null)} />;
    }

    if (activeTemplate === 'projections') {
        return <ActionToGrowthProjections onBack={() => setActiveTemplate(null)} onProjectionsUpdate={onProjectionsUpdate} currency={currency} />;
    }

    return (
        <div className="space-y-6 md:space-y-8">
            <h1 className="text-3xl font-bold text-gray-900">BMG Custom Planning Templates</h1>
            <div className="bg-white p-6 md:p-8 rounded-xl border border-gray-200 shadow-sm">
                <p className="text-gray-600 mb-6">
                    Leverage our expertly crafted templates to fast-track your business planning and execution. These are designed exclusively for our Pro users to provide a competitive edge.
                </p>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                   <TemplateCard 
                        title="Business Growth Preparatory Template"
                        description="A comprehensive workbook to help you move from scattered ideas to a clear, documented growth plan."
                        onClick={() => setActiveTemplate('preparatory')}
                   />
                   <TemplateCard 
                        title="Action to Growth Projections"
                        description="Translate your strategic plans into actionable financial projections with this dynamic template."
                        onClick={() => setActiveTemplate('projections')}
                   />
                </div>
            </div>
        </div>
    );
};

export default BMGTemplates;