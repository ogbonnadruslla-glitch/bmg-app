import React, { useState } from 'react';
import { MarketingService, Currency } from '../types';

const services: MarketingService[] = [
    { id: 'd1', category: 'Digital', name: 'Digital Presence Setup', description: 'Social media pages, websites, and other relevant digital footprints.' },
    { id: 'd2', category: 'Digital', name: 'Digital Advertising', description: 'Setup and management of ads on social media, Google, and in-app.' },
    { id: 'o1', category: 'Offline', name: 'Brand Collateral Production', description: 'Fliers, shop branding, signages, and other advertising materials.' },
    { id: 'o2', category: 'Offline', name: 'Offline Campaign Deployment', description: 'Publicity strategies and campaign execution.' },
];

const currencySymbols: { [key in Currency]: string } = { NGN: '₦', USD: '$', EUR: '€', GBP: '£' };

const MarketingServices: React.FC<{currency: Currency}> = ({ currency }) => {
    const [selectedServices, setSelectedServices] = useState<string[]>([]);
    const [budget, setBudget] = useState('');
    const currencySymbol = currencySymbols[currency] || '₦';

    const handleServiceToggle = (serviceId: string) => {
        setSelectedServices(prev => 
            prev.includes(serviceId) 
                ? prev.filter(id => id !== serviceId) 
                : [...prev, serviceId]
        );
    };

    const handleSubmit = (e: React.FormEvent) => {
        e.preventDefault();
        if (selectedServices.length === 0) {
            alert('Please select at least one service.');
            return;
        }
        alert(`Request Sent!
Services: ${selectedServices.join(', ')}
Budget: ${currencySymbol}${budget || 'Not specified'}
Our team will contact you shortly to follow up.`);
        
        // Reset form
        setSelectedServices([]);
        setBudget('');
    };
    
    const digitalServices = services.filter(s => s.category === 'Digital');
    const offlineServices = services.filter(s => s.category === 'Offline');

    return (
        <div className="space-y-6 md:space-y-8">
            <h1 className="text-3xl font-bold text-gray-900">Marketing Services</h1>
            <form onSubmit={handleSubmit} className="bg-white p-6 md:p-8 rounded-xl border border-gray-200 shadow-sm space-y-8">
                <div>
                    <h2 className="text-xl font-semibold text-gray-800">Digital Marketing</h2>
                    <p className="text-gray-500 mt-1">Boost your online presence and reach.</p>
                    <div className="mt-4 space-y-4">
                        {digitalServices.map(service => (
                            <div key={service.id} className="relative flex items-start">
                                <div className="flex items-center h-5">
                                    <input id={service.id} name={service.id} type="checkbox" checked={selectedServices.includes(service.id)} onChange={() => handleServiceToggle(service.id)} className="focus:ring-green-500 h-4 w-4 text-green-600 border-gray-300 rounded" />
                                </div>
                                <div className="ml-3 text-sm">
                                    <label htmlFor={service.id} className="font-medium text-gray-700">{service.name}</label>
                                    <p className="text-gray-500">{service.description}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>

                <div>
                    <h2 className="text-xl font-semibold text-gray-800">Offline Marketing</h2>
                    <p className="text-gray-500 mt-1">Connect with your customers in the physical world.</p>
                    <div className="mt-4 space-y-4">
                        {offlineServices.map(service => (
                            <div key={service.id} className="relative flex items-start">
                                <div className="flex items-center h-5">
                                    <input id={service.id} name={service.id} type="checkbox" checked={selectedServices.includes(service.id)} onChange={() => handleServiceToggle(service.id)} className="focus:ring-green-500 h-4 w-4 text-green-600 border-gray-300 rounded" />
                                </div>
                                <div className="ml-3 text-sm">
                                    <label htmlFor={service.id} className="font-medium text-gray-700">{service.name}</label>
                                    <p className="text-gray-500">{service.description}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
                
                <div>
                    <label htmlFor="budget" className="block text-sm font-medium text-gray-700">Your Budget (Optional)</label>
                    <div className="mt-1 relative rounded-md shadow-sm">
                        <div className="pointer-events-none absolute inset-y-0 left-0 pl-3 flex items-center"><span className="text-gray-500 sm:text-sm">{currencySymbol}</span></div>
                        <input type="number" name="budget" id="budget" value={budget} onChange={(e) => setBudget(e.target.value)} className="w-full bg-white border-gray-300 text-gray-900 rounded-md pl-7 pr-4 py-2 focus:ring-green-500 focus:border-green-500" placeholder="e.g., 1000" />
                    </div>
                </div>
                
                <div className="flex justify-end pt-4">
                    <button type="submit" className="px-8 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg shadow-md transition-colors">
                        Send Request
                    </button>
                </div>
            </form>
        </div>
    );
};

export default MarketingServices;